---
layout: post
title:  "micro:bit inchworm しゃくとり虫 - サーボを動かしてみる"
date:   2020-07-14 20:45:00 +0900
categories: microbit inchworm servo
---
しゃくとり虫を組み立てる前に、サーボの動きを確認してみよう。

## じゅんび

* マイクロビット
* サーボ（[9g SG90](http://akizukidenshi.com/catalog/g/gM-08761/){:target="_blank"}）
* 電池ボックス
* ワニ口クリップコード 3本
* ジャンパーワイヤー（オス - オス） 3本

## やりかた

### マイクロビットにプログラムをダウンロードする
   このプログラムをマイクロビットにダウンロードしよう。
   <div style="position:relative;height:0;padding-bottom:70%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="https://makecode.microbit.org/#pub:_DicCcUX5UiiM" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe></div>

   1. プログラムの右上の「編集」アイコンをクリックするとMicrosoft Makecodeの画面が開く
   2. Makecodeの画面上でマイクロビットのAボタンをクリックし、サーボのアームが0度から180度の位置に動くことを確認しよう
   3. マイクロビットとパソコンをUSBケーブルでつなぐ。マイクロビットとパソコンの接続は [micro:bitが使えるようにする](https://kidsc2.org/recipes/9/chapters){:target="_blank"} を参考にしてね。
   4. Makecodeの「ダウンロード」をクリックし、プログラムをマイクロビットにダウンロードしよう。
   5. ダウンロードが終わったら、マイクロビット（実物）のAボタンを押し、「A」の文字が表示されたら成功だ

### マイクロビットとサーボを接続する
ワニ口クリップコードとジャンパーワイヤーを使ってマイクロビットとサーボをつなごう。サーボのコネクタにジャンパーワイヤーをさしこみ、それをワニ口クリップではさむとよい。

つなぎ方は下の図を参考にしよう。電池ボックスもマイクロビットにつなぐ。
```
マイクロビット    サーボ(SG90)
---------------------------
     GND <------>  茶
     3V  <------>  赤
      0  <------>  橙
```

### サーボを動かしてみよう
   マイクロビットの'A'ボタンを押すとサーボのアームが0度から180度の位置に動くはずだ。

### 成功
サーボの動きが確認できたらしゃくとり虫を組み立てよう!

## 動かないときは
マイクロビットのAボタンを押してもサーボが動かないときはここに書いていることを確認してみよう
### マイクロビットのAボタンを押すとLEDに「A」と表示されますか 
「A」の文字が表示されない場合はマイクロビット上でプログラムが動いていない。
* プログラムのダウンロードは成功しましたか？
  マイクロビットのじゅんびについては [はじめてのmicro:bit](https://kidsc2.org/recipes/9/chapters){:target="_blank"} などを参考にしてね。
* 電池の入った電池ボックスを接続していますか？

### サーボを確認しよう
* サーボは「[9g SG90](http://akizukidenshi.com/catalog/g/gM-08761/){:target="_blank"}」ですか？違うサーボでは（このつなぎ方では）動かないことがある。
* サーボの3本の線と、マイクロビットを上の図のとおりにつないでいますか？もういちどよくみてみよう。
* 電池ボックスをつないでいますか？新しい電池を入れていますか？サーボは電気をたくさん使う。電池が古いと動かないことがある。
* つないでいるコードがこわれていませんか？ワニ口コードやジャンパーワイヤーなどはときどき切れていることがある（見た目ではわからない）。テスターがある人はテスターで、ない人は豆電球やモーターなどと電池を使って線が切れていないことを確認しよう。

## 参考情報（必要な人だけ読んでください）

マイクロビットしゃくとり虫では、サーボ用の電源を別に使わずに、マイクロビットから直接サーボに電力を供給します。そのため以下の点に注意が必要です。
* SG90以外のサーボでは電力不足で動かないことがあります
* マイクロビットの電源をUSBからとるとサーボに必要な電流が供給できません。PHコネクタか、エッジコネクタへ給電します。だだしその場合は3.3Vまでにしましょう。サーボの規格が5Vだからといって、その電圧をPHコネクタかエッジコネクタにかけるとマイクロビットがこわれます（マイクロビット用の電池ボックスにアルカリ電池かエネループを入れれば問題ないです）
* アルカリ電池は新品、エネループならばフル充電のものを使用してください
